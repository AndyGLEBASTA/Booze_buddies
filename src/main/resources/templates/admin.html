<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content = "text/html">
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1">
    <title>Buddies</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    window.onload = function hide() {

        if( document.getElementById("role").innerText == "ADMIN") {
            document.getElementById("ban").hidden = true;
            document.getElementById("password").innerHTML = "*******";
        }
        else  {
            document.getElementById("ban").hidden = false;
        }
    }

</script>
<body>
<li><span style=vertical-align:bottom><a th:href="@{/logout}">Log out</a> </span></li>
<div class ="container links">
    <div th:switch="${users}">
        <h2 th:case="null">No buddies found!</h2>
        <div th:case="*">
            <h2>ALL USERS</h2>
            <table>
                <thead>
                <tr>

                    <th>Username</th>
                    <th>Password</th>
                    <th>Status</th>
                    <th>Role</th>
                    <th>BAN</th>

                </tr>
                </thead>
                <tbody>
                <form class="form-profile" th:action="@{/admin}" method="post" th:name="profile" th:id="profile" onload = "return hide()" >
                    <tr th:each="user : ${users}">

                        <td name = "username" id = "username" th:text="${user.username}" th:value="${user.username}"></td>

                        <td name = "password" id = "password" th:text="${user.password}" th:value="${user.username}"></td>
                        <td name = "active" id = "active" th:text="${user.active}" th:value = ${user.active}></td>
                        <td id="role" th:text="${user.role.getName()}"></td>
                        <td><a id="ban" th:href="@{/ban-user/{id}(id=${user.id})}">Ban/Unban<i></i></a></td>

                </form>

                </tr>

                </tbody>


            </table>
        </div>
        <p><a href="/registration">Create user</a></p>
    </div>
</div>
</body>
</html>